import{ab as R,ac as _,ad as w,R as d,c as e,aj as D,a4 as I,a5 as n,F as m,j as i,n as C,T as c,U as $,o as f,m as q,ak as E,al as z,Y as G,am as F,A as k,ah as H,ai as A,ag as L}from"./index.025b3bd7.js";import{T as U}from"./Ticket.d493817c.js";import{C as b}from"./Chip.07a4a8e0.js";import{F as M,T as N}from"./TextField.e6e7b6aa.js";import{C as S}from"./Card.2183dc61.js";import{C as j}from"./CardContent.062b882f.js";import{S as V}from"./Slide.72ca558d.js";import{d as K,a as O}from"./HighlightOff.7aef7a23.js";import{S as W,a as y,b as p}from"./Stepper.a1d3a061.js";import"./CardActionArea.23b69ba9.js";import"./CardMedia.9c7bc2e9.js";import"./index.f2a06ad4.js";var T={},Y=_.exports;Object.defineProperty(T,"__esModule",{value:!0});var P=T.default=void 0,J=Y(R()),Q=w,X=(0,J.default)((0,Q.jsx)("path",{d:"M4 18v3h3v-3h10v3h3v-6H4v3zm15-8h3v3h-3v-3zM2 10h3v3H2v-3zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"}),"EventSeat");P=T.default=X;function Z(t){const[a,l]=d.useState(t.selection.find(s=>s===t.id)===t.id),r=d.useCallback(()=>{t.setSelection(s=>s.find(o=>o===t.id)?(l(!1),s.filter(o=>o!==t.id)):s.length===10?s:(l(!0),[...s,t.id]))},[t]);return e(D,{title:t.id,children:e(I,{onClick:r,color:a?"secondary":"default",children:e(P,{fontSize:"large"})})})}function ee({rows:t,columns:a,selection:l,setSelection:r}){const[s,o]=d.useState([]),v=d.useCallback(()=>{const u=[];for(let h=0;h<a+1;h++)u.push(e(n,{item:!0,xs:1,display:"flex",justifyContent:"center",children:h?e(b,{label:h,color:"primary"}):e(m,{})},`chip${h}`));for(let h=0;h<t;h++){u.push(e(n,{item:!0,xs:1,display:"flex",justifyContent:"center",children:e(b,{label:String.fromCharCode(65+h),color:"primary"})},String.fromCharCode(65+h)));for(let g=0;g<a;g++)u.push(e(n,{item:!0,xs:1,display:"flex",justifyContent:"center",children:e(Z,{id:String.fromCharCode(65+h)+(g+1),setSelection:r,selection:l})},String.fromCharCode(65+h)+(g+1)))}return u},[a,t,l,r]);return d.useEffect(()=>{o([]),o(v())},[v,l]),i(C,{sx:{mt:4},children:[e(c,{sx:{mb:2},variant:"h4",children:"Stoel Selectie:"}),l.map(u=>e(M,{in:!0,children:e(b,{label:u,color:"info",sx:{mr:1}})},u)),i(n,{sx:{mt:1},container:!0,spacing:1,columns:a+1,children:[s,e(n,{item:!0,xs:a+1,children:e(C,{sx:{p:2,bgcolor:"white",color:"black",borderRadius:1},children:e(c,{align:"center",variant:"h5",children:"Scherm"})})})]})]})}function te(t){const{user:a}=d.useContext($),l=d.useCallback(r=>{t.setGegevens({amount:t.selection.length*10,cardNum:r.target.value})},[t]);return i(n,{container:!0,spacing:3,children:[e(n,{item:!0,xs:12,lg:6,children:e(S,{children:e(j,{children:i(n,{container:!0,spacing:3,children:[e(n,{item:!0,xs:12,children:e(c,{variant:"h4",children:"Product:"})}),i(n,{item:!0,xs:6,children:[e(c,{variant:"h6",children:t.data.titel}),e(c,{variant:"body2",children:t.data.omschrijving})]}),i(n,{item:!0,xs:6,children:[i(c,{variant:"body1",children:["Hoeveelheid: ",t.selection.length," ",t.selection.length===1?"Ticket":"tickets"]}),i(c,{children:["Stoelen: ",t.selection.map((r,s)=>s===t.selection.length-1?r:`${r}, `)]})]}),e(n,{item:!0,xs:12,children:e(N,{onChange:l,fullWidth:!0,label:"Rekening nummer"})})]})})})}),e(n,{item:!0,xs:12,lg:6,children:e(S,{children:e(j,{children:i(n,{container:!0,spacing:3,children:[e(n,{item:!0,xs:12,children:e(c,{variant:"h4",children:"Gebruiker:"})}),e(n,{item:!0,xs:12,children:e(c,{variant:"h6",children:a.userData?a.userData.naam:"Anoniem"})})]})})})})]})}function ne(t){var l,r,s;const a=[{label:"Programma:",data:t.ticket.titel},{label:"Omschrijving:",data:t.ticket.omschrijving},{label:"Hoeveelheid:",data:`\u20AC ${(l=t.data)==null?void 0:l.amount.toFixed(2)}`},{label:"Rekeningsnummer:",data:(r=t.data)==null?void 0:r.cardNum}];return e(V,{in:!0,direction:"left",children:i(n,{container:!0,spacing:3,pt:2,p:3,children:[e(n,{item:!0,xs:12,sm:!0,lg:4,children:e(C,{component:"img",src:(s=t.ticket)==null?void 0:s.afbeelding,sx:{width:250,p:2,bgcolor:"divider",borderRadius:1}})}),e(n,{item:!0,xs:12,sm:6,children:a.map(o=>i(m,{children:[e(c,{variant:"body2",sx:{color:"primary.main"},children:o.label}),e(c,{children:o.data}),e("br",{})]}))}),i(n,{item:!0,xs:12,sm:6,children:[e(f,{variant:"contained",onClick:t.nextStep,sx:{mr:2},children:"gereed"}),e(f,{variant:"outlined",onClick:t.previousStep,children:"terug"})]})]})})}function ie(t){const[a,l]=d.useState(0),r=q();return d.useEffect(()=>{(async()=>{l(0);const o=crypto.randomUUID();if((await k("external").Pay(t.data.amount,o,"")).status!==200){l(2);return}if((await k("bestellingen").Create({})).status!==200){l(2);return}l(1)})()},[t]),i(m,{children:[a===0&&i(m,{children:[e(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e(E,{size:200,sx:{mt:2,color:z[500]}})}),e(n,{item:!0,xs:12,children:e(c,{variant:"h3",align:"center",children:"Even geduld AUB"})})]}),a===1&&i(m,{children:[e(G,{in:!0,children:e(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e(K,{sx:{fontSize:200,mt:2,color:z[500]}})})}),i(n,{item:!0,xs:12,children:[e(c,{variant:"h3",align:"center",children:"betaling Gelukt"}),e(c,{variant:"h3",align:"center",children:"Dank u wel!"})]}),e(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e(f,{variant:"contained",onClick:()=>r(-1),children:"Terug naar home pagina"})})]}),a===2&&i(m,{children:[e(G,{in:!0,children:e(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e(O,{sx:{fontSize:200,mt:2,color:F[500]}})})}),i(n,{item:!0,xs:12,children:[e(c,{variant:"h3",align:"center",children:"Donatie niet gelukt."}),e(c,{variant:"h3",align:"center",children:"Probeer later"})]}),e(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e(f,{variant:"contained",onClick:()=>r(-1),children:"Terug naar home pagina"})})]})]})}function ve(){const{id:t}=H(),[a,l]=d.useState(null),[r,s]=d.useState(0),[o,v]=d.useState([]),[u,h]=d.useState(null),g=d.useCallback(async()=>{s(x=>x-1)},[]),B=d.useCallback(async()=>{s(x=>x+1)},[]);return d.useEffect(()=>{k("programmeringen").Get(t).then(x=>{l(x.data)})},[t]),e(A,{sx:{height:"80vh",display:"flex",justifyContent:"center",alignItems:"center",my:4},children:a?i(S,{elevation:4,sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[e(S,{elevation:4,sx:{zIndex:1e4,p:1,position:"sticky",top:0,bgcolor:"background.default"},children:i(W,{activeStep:r,alternativeLabel:!0,children:[e(y,{children:e(p,{children:"Stoelen Kiezen"})}),e(y,{children:e(p,{children:"Betaal gegevens"})}),e(y,{children:e(p,{children:"Bestelling bevestigen"})})]})}),i(j,{children:[r===0&&i(m,{children:[e(c,{variant:"h4",sx:{pb:2},children:"Bestelling"}),e(U,{...a}),e(ee,{columns:10,rows:10,selection:o,setSelection:v})]}),r===1&&i(m,{children:[e(c,{variant:"h4",sx:{pb:2},children:"Betaal Gegevens:"}),e(te,{data:a,selection:o,setGegevens:h})]}),r===2&&i(m,{children:[e(c,{variant:"h4",sx:{pb:2},children:"Betaal Gegevens:"}),e(ne,{data:u,nextStep:B,previousStep:g,ticket:a})]}),r===3&&u&&e(ie,{data:u}),r<2&&i(C,{sx:{my:4},children:[e(f,{variant:"contained",onClick:B,sx:{mr:2},children:"Volgende Stap"}),e(f,{disabled:r===0,variant:"outlined",onClick:g,children:"Voorige Stap"})]})]})]}):e(L,{})})}export{ve as default};
